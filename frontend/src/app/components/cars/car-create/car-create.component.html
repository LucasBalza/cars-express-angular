<div class="container mt-4">
  <div class="row">
    <div class="col-12">
      <h1 class="page-title mb-4">Ajouter une voiture</h1>
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <form [formGroup]="carForm" (ngSubmit)="onSubmit()" class="card">
        <div class="card-body">
          <div class="row g-3">
            <div class="col-md-6">
              <label for="brand" class="form-label">Marque</label>
              <input
                type="text"
                class="form-control"
                id="brand"
                formControlName="brand"
                placeholder="Ex: BMW"
                [class.is-invalid]="isFieldInvalid('brand')"
              >
              <div class="invalid-feedback" *ngIf="isFieldInvalid('brand')">
                La marque est requise
              </div>
            </div>

            <div class="col-md-6">
              <label for="model" class="form-label">Modèle</label>
              <input
                type="text"
                class="form-control"
                id="model"
                formControlName="model"
                placeholder="Ex: M4"
                [class.is-invalid]="isFieldInvalid('model')"
              >
              <div class="invalid-feedback" *ngIf="isFieldInvalid('model')">
                Le modèle est requis
              </div>
            </div>

            <div class="col-md-4">
              <label for="year" class="form-label">Année</label>
              <input
                type="number"
                class="form-control"
                id="year"
                formControlName="year"
                placeholder="Ex: 2023"
                [class.is-invalid]="isFieldInvalid('year')"
              >
              <div class="invalid-feedback" *ngIf="isFieldInvalid('year')">
                L'année doit être comprise entre 1900 et {{ maxYear }}
              </div>
            </div>

            <div class="col-md-4">
              <label for="color" class="form-label">Couleur</label>
              <input
                type="text"
                class="form-control"
                id="color"
                formControlName="color"
                placeholder="Ex: Noir"
                [class.is-invalid]="isFieldInvalid('color')"
              >
              <div class="invalid-feedback" *ngIf="isFieldInvalid('color')">
                La couleur est requise
              </div>
            </div>

            <div class="col-md-4">
              <label for="price" class="form-label">Prix</label>
              <div class="input-group">
                <span class="input-group-text">€</span>
                <input
                  type="number"
                  class="form-control"
                  id="price"
                  formControlName="price"
                  placeholder="Ex: 50000"
                  [class.is-invalid]="isFieldInvalid('price')"
                >
                <div class="invalid-feedback" *ngIf="isFieldInvalid('price')">
                  Le prix doit être supérieur à 0
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="card-footer bg-transparent d-flex justify-content-end gap-2">
          <button type="button" class="btn btn-outline-secondary" routerLink="/cars">
            Annuler
          </button>
          <button type="submit" class="btn btn-primary" [disabled]="carForm.invalid || loading">
            <span *ngIf="loading" class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span>
            Ajouter
          </button>
        </div>
      </form>
    </div>
  </div>
</div>